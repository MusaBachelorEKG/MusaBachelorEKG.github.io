<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>EKG Generator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="controls">
    <label for="diagnose">Diagnose hier eintragen:</label>
    <input type="text" id="diagnose" />
    <button id="generate">EKG generieren</button>
    <button id="restart">Neustart</button>
    <input type="file" id="aiJsonFile" accept="application/json" style="display:none" />
    <button id="aiJsonLoad">ChatGPT JSON hinzufügen</button>
    <select id="aiJsonSelect" style="display:none"></select>
    <button id="download" disabled>Bild herunterladen</button>
  </div>
  <div id="workspace">
    <canvas id="ekg" width="1480" height="830"></canvas>
    <div id="editor">
      <h3>Wellen anpassen</h3>
      <label>Ableitung
        <select id="leadSelect">
          <option value="all">Alle Ableitungen</option>
          <option value="I">I</option>
          <option value="II">II</option>
          <option value="III">III</option>
          <option value="aVL">aVL</option>
          <option value="aVR">aVR</option>
          <option value="aVF">aVF</option>
          <option value="V1">V1</option>
          <option value="V2">V2</option>
          <option value="V3">V3</option>
          <option value="V4">V4</option>
          <option value="V5">V5</option>
          <option value="V6">V6</option>
        </select>
      </label>
      <div class="wave-group p-group">
        <h4>P-Welle</h4>
        <label>P-Höhe
          <input type="range" id="pAmp" min="-40" max="40" value="20" list="zeroPoint" />
        </label>
        <label>P-Länge
          <input type="range" id="pLen" min="10" max="60" value="25" />
        </label>
        <label class="checkbox">Vorhofflimmern
          <input type="checkbox" id="afibBox" />
        </label>
        <label class="checkbox">Vorhofflattern
          <input type="checkbox" id="aflutterBox" />
        </label>
        <label>PQ-Zeit
          <input type="range" id="pqTime" min="0" max="200" value="10" />
        </label>
        <label class="checkbox">AV-Block?
          <input type="checkbox" id="avBlockBox" />
        </label>
        <div id="avBlockControls" style="display:none">
          <label>Typ
            <select id="avBlockType">
              <option value="2-1">AV-Block 2 Typ 1</option>
              <option value="2-2">AV-Block 2 Typ 2</option>
              <option value="3">AV-Block 3</option>
            </select>
          </label>
          <label>P/QRS-Verhältnis
            <input type="number" id="avBlockRatio" min="2" max="5" value="3" />
          </label>
        </div>
      </div>
      <div class="wave-group qrs-group">
        <h4>QRS-Komplex</h4>
        <label>Q-Höhe
          <input type="range" id="qAmp" min="-40" max="40" value="-10" list="zeroPoint" />
        </label>
        <label>R-Höhe
          <input type="range" id="rAmp" min="-80" max="80" value="40" list="zeroPoint" />
        </label>
        <label>S-Höhe
          <input type="range" id="sAmp" min="-80" max="80" value="-20" list="zeroPoint" />
        </label>
        <label>QRS-Breite
          <input type="range" id="qrsWidth" min="20" max="160" value="30" />
        </label>
        <label class="checkbox">Rhythmisch?
          <input type="checkbox" id="rhythm" checked />
        </label>
        <label>Arrhythmiegrad
          <select id="arrLevel">
            <option value="leicht">Leicht</option>
            <option value="mittel" selected>Mittel</option>
            <option value="schwer">Schwer</option>
            <option value="extrem">Extrem</option>
          </select>
        </label>
        <label class="checkbox">Extrasystolen?
          <input type="checkbox" id="extraBox" />
        </label>
        <div id="extraControls" style="display:none">
          <label>Typ
            <select id="extraType">
              <option value="sve">SVE</option>
              <option value="ve">VE</option>
            </select>
          </label>
          <label>Anzahl
            <input type="number" id="extraCount" min="1" max="5" value="1" />
          </label>
          <button type="button" id="extraPlace">Wo?</button>
        </div>
      </div>
      <div class="wave-group stt-group">
        <h4>ST &amp; T</h4>
        <label>ST-Höhe
          <input type="range" id="stHeight" min="-40" max="40" value="0" list="zeroPoint" />
        </label>
        <label class="checkbox">ST-Streckenhebung
          <input type="checkbox" id="stElevBox" />
        </label>
        <label>T-Höhe
          <input type="range" id="tAmp" min="-60" max="60" value="20" list="zeroPoint" />
        </label>
        <label>T-Breite
          <input type="range" id="tWidth" min="20" max="80" value="40" />
        </label>
        <label class="checkbox">Spitz?
          <input type="checkbox" id="tPeakedBox" />
        </label>
      </div>
      <div class="wave-group misc-group">
        <h4>Weitere</h4>
        <label>Isoelektrische-Länge
          <input type="range" id="isoLen" min="20" max="120" value="60" />
        </label>
        <label>Komplexe
          <input type="number" id="complexes" min="0" max="30" step="1" value="5" />
        </label>
        <button id="resetControls">Regler zurücksetzen</button>
        <button id="copyBtn">Kopiere</button>
      </div>
      <div id="cabreraWrap">
        <canvas id="cabrera" width="200" height="200"></canvas>
      </div>
    </div>
  </div>
  <div id="checklist">
    <label class="checkbox">Bild Generierung gelungen?
      <input type="checkbox" id="chk-generated" />
    </label>
    <label class="checkbox">Bild Exportiert?
      <input type="checkbox" id="chk-exported" />
    </label>
    <label class="checkbox">Name richtig?
      <input type="checkbox" id="chk-name" />
    </label>
  </div>
  <div id="copyModal" class="modal" style="display:none">
    <div class="modal-content">
      <h3>Ableitungen auswählen</h3>
      <p>Bitte markiere die Zielableitungen und bestätige.</p>
      <div id="copyLeadOptions"></div>
      <div class="modal-actions">
        <button id="copyConfirm" disabled>Übernehmen</button>
        <button id="copyCancel">Abbrechen</button>
      </div>
    </div>
  </div>
  <datalist id="zeroPoint">
    <option value="0"></option>
  </datalist>
  <script src="script.js"></script>
</body>
</html>
